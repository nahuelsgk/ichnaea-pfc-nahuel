{% extends '::GUI/withContainer.html.twig' %}

{% block page_title %}Your dashboard{% endblock %}


{% block main_content %}
<h1>Welcome {{app.user.username}}</h1>

<div style="float: left; width: 45%;">
 <legend>Your matrixs</legend>
 <table class="table">
 <thead>
 <tr>
  <th>&nbsp;</th>
  <th>Name</th>
  <th>&nbsp;</th>
 </tr>
 </thead>
 <tbody>
 {% for matrix in app.user.matrixs %}
 <tr>
  <td>
  	<a class="btn btn-mini" href="{{path('matrix_ui_edit', {'matrix_id': matrix.id})}}" name="view_matrix" title="Configure columns and samples">
    <i class="icon-edit"></i></td>
  <td>{{matrix.name}}</td>
 </tr>
 {% endfor %}
 </tbody>
 </table>
</div>

<div style="float: right; width: 45%;">
 <legend>Your trainings</legend>
 <table class="table">
 <thead>
 <tr>
  <th>&nbsp;</th>
  <th>Name</th>
  <th>Matrix</th>
  <th>Progress</th>
  <th>Error</th>
 </tr>
 </thead>
 {% if app.user.trainings %}
 <tbody>
 {% for training in app.user.trainings %}
 <tr class="
    {% if training.error != '' %}
    warning
    {% else %}
 	  {% if training.status == 'finished' %}
 	    {% if training.progress == '1.0' and training.error == "" %}
 	    success
 	    {% endif %}
 	  {% endif %}
 	  {% if training.status == 'sent' %}
 		  active
 	  {% endif %}
 	  {% if training.status == 'pending' %}
 	     warning
 	  {% endif %}
 	{% endif %}
 ">
   <td>
     <a class="btn btn-mini" href="{{path('training_view', {'matrix_id': training.matrix.id, 'training_id': training.id})}}" name="view_training" title="View training">
     <i class="icon-eye-open"></i>
     <a class="btn btn-mini" href="{{path('training_delete', {'matrix_id': training.matrix.id, 'training_id': training.id})}}" name="view_training" title="View training">
     <i class="icon-remove"></i>
     {% if training.status == 'finished' and training.progress == '1.0' %}
     <a class="btn btn-mini" href="{{path('create_prediction_matrix_form', {'matrix_id': training.matrix.id, 'training_id': training.id})}}" name="view_training" title="Create a matrix prediction">
     <i class="icon-th"></i>
     {% endif %}
     </td>
   <td>{{training.name}}</td>
   <td>{{training.matrix.name}}</td>
   <td>{{training.progress}}</td>
   <td>{{training.error}}</td>
   <td></td>
 </tr>
 {% endfor %}
 </tbody>
 {% endif %}
 </table>
<div>
{% endblock %}